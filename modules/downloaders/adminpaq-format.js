const _ = require('lodash');

module.exports = function (order) {
    const date = new Date(order.date);
    const orderDate = `${date.getMonth()}/${date.getDate()}/${date.getFullYear()}`;
    const futureDate15Days = `${date.getMonth() + 15}/${date.getDate()}/${date.getFullYear()}`;
    const futureDate1Day = `${date.getMonth() + 1}/${date.getDate()}/${date.getFullYear()}`;

    let products = ``;
    _.each(order.items, (item, key) => {
        products += `MGW10010
${key + 100}
${item.sku}
1
${item.quantity.toFixed(5)}
0.00000
${item.quantity.toFixed(5)}


${(item.price/100).toFixed(5)}
${(item.price/100).toFixed(5)}
0.00000
0.00000
${(item.subtotals/100).toFixed(5)}
${(item.iva/100).toFixed(5)}
16.00000
0.00000
0.00000
0.00000
0.00000
0.00000
0.00000
0.00000
0.00000
${(item.discountValue/100).toFixed(5)}
${(item.discount/100).toFixed(5)}
0.00000
0.00000
0.00000
0.00000
0.00000
0.00000
0.00000
0.00000
${(item.totals/100).toFixed(5)}
0.00000

3
0
0
${orderDate}
0
${item.quantity.toFixed(5)}
0.00000
0.00000
0.00000
1




12/30/1899
0.00000
0.00000
0.00000
0.00000
0.00000
{

}
0.00000
`;
    });

    return `DOCUMENTOS
MGW10008
cCodigoConcepto
CSERIEDOCUMENTO
CFOLIO
CFECHA
cCodigoCteProv
CRAZONSOCIAL
CRFC
cCodigoAgente
CFECHAVENCIMIENTO
CFECHAPRONTOPAGO
CFECHAENTREGARECEPCION
CFECHAULTIMOINTERES
CIDMONEDA
CTIPOCAMBIO
CREFERENCIA
cCodigoDocumentoOrigen
CAFECTADO
CIMPRESO
CCANCELADO
CDEVUELTO
CIDPREPOLIZA
CIDPREPOLIZACANCELACION
CESTADOCONTABLE
CGASTO1
CGASTO2
CGASTO3
CDESCUENTOPRONTOPAGO
CPORCENTAJEIMPUESTO1
CPORCENTAJEIMPUESTO2
CPORCENTAJEIMPUESTO3
CPORCENTAJERETENCION1
CPORCENTAJERETENCION2
CPORCENTAJEINTERES
CTEXTOEXTRA1
CTEXTOEXTRA2
CTEXTOEXTRA3
CFECHAEXTRA
CIMPORTEEXTRA1
CIMPORTEEXTRA2
CIMPORTEEXTRA3
CIMPORTEEXTRA4
CDESTINATARIO
CNUMEROGUIA
CMENSAJERIA
CCUENTAMENSAJERIA
CNUMEROCAJAS
CPESO
COBSERVACIONES
CBANOBSERVACIONES
CBANDATOSENVIO
CBANCONDICIONESCREDITO
CBANGASTOS
CIMPCHEQPAQ
CSISTORIG
CIDMONEDCA
CTIPOCAMCA
/MGW10008
MGW10011
CTIPOCATALOGO
CTIPODIRECCION
CNOMBRECALLE
CNUMEROEXTERIOR
CNUMEROINTERIOR
CCOLONIA
CCODIGOPOSTAL
CTELEFONO1
CTELEFONO2
CTELEFONO3
CTELEFONO4
CEMAIL
CDIRECCIONWEB
CPAIS
CESTADO
CCIUDAD
CTEXTOEXTRA
CMUNICIPIO
/MGW10011
MGW10010
CNUMEROMOVIMIENTO
cCodigoProducto
cCodigoAlmacen
CUNIDADES
CUNIDADESNC
CUNIDADESCAPTURADAS
cNombreUnidad
cNombreUnidadNC
CPRECIO
CPRECIOCAPTURADO
CCOSTOCAPTURADO
CCOSTOESPECIFICO
CNETO
CIMPUESTO1
CPORCENTAJEIMPUESTO1
CIMPUESTO2
CPORCENTAJEIMPUESTO2
CIMPUESTO3
CPORCENTAJEIMPUESTO3
CRETENCION1
CPORCENTAJERETENCION1
CRETENCION2
CPORCENTAJERETENCION2
CDESCUENTO1
CPORCENTAJEDESCUENTO1
CDESCUENTO2
CPORCENTAJEDESCUENTO2
CDESCUENTO3
CPORCENTAJEDESCUENTO3
CDESCUENTO4
CPORCENTAJEDESCUENTO4
CDESCUENTO5
CPORCENTAJEDESCUENTO5
CTOTAL
CPORCENTAJECOMISION
CREFERENCIA
CAFECTAEXISTENCIA
CAFECTADOSALDOS
CAFECTADOINVENTARIO
CFECHA
CMOVTOOCULTO
cCodigoMovtoOrigen
CUNIDADESPENDIENTES
CUNIDADESNCPENDIENTES
CUNIDADESORIGEN
CUNIDADESNCORIGEN
CTIPOTRASPASO
cCodigoValorClasificacion
CTEXTOEXTRA1
CTEXTOEXTRA2
CTEXTOEXTRA3
CFECHAEXTRA
CIMPORTEEXTRA1
CIMPORTEEXTRA2
CIMPORTEEXTRA3
CIMPORTEEXTRA4
CGTOMOVTO
COBSERVAMOV
CCOMVENTA
CSCMOVTO
/MGW10010
MGW10025
cCodigoAlmacen
cCodigoProducto
CFECHA
CTIPOCAPA
CNUMEROLOTE
CFECHACADUCIDAD
CFECHAFABRICACION
CPEDIMENTO
CADUANA
CFECHAPEDIMENTO
CTIPOCAMBIO
CEXISTENCIA
CCOSTO
CCODIGOCAPAORIGEN
CNUMADUANA
/MGW10025
MGW10028
cCodigoCapa
CFECHA
CUNIDADES
CTIPOCAPA
CNOMBREUNIDADCAPTURA
/MGW10028
MGW10032
cCodigoProducto
CNUMEROSERIE
cCodigoAlmacen
CNUMEROLOTE
CFECHACADUCIDAD
CFECHAFABRICACION
CPEDIMENTO
CADUANA
CFECHAPEDIMENTO
CTIPOCAMBIO
CCOSTO
CNUMADUANA
/MGW10032
MGW10009
CLLAVEABONO
cMonedaAbono
CLLAVECARGO
CIDMONEDA
CIMPORTEABONO
CIMPORTECARGO
CFECHAABONOCARGO
CLLAVEDESCUENTO
cCodigoCteProv
/MGW10009

MGW10008
2

${order.folio}
${orderDate}
${order.client.folio}
${order.client.profile.fullName}
${order.client.rfc}
1
${futureDate15Days}
${orderDate}
${futureDate1Day}
${futureDate15Days}
1


1
0
0
0
0
0
1
0.00000
0.00000
0.00000
0.00000
0.00000
0.00000
0.00000
0.00000
0.00000
0.00000



12/30/1899
0.00000
0.00000
0.00000
0.00000
${order.client.fullName}
0


0.00000
0.00000
{


}
0
1
0
0
0.00000
0
0
0.00000
MGW10011
3
0
${order.client.profile.address.street}
${order.client.profile.address.number}
${order.client.profile.address.interior}
${order.client.profile.address.neighborhood}
${order.client.profile.address.postalCode}
${order.client.profile.address.phone1}
${order.client.profile.address.phone2}




MEXICO
${order.client.profile.address.city}
${order.client.profile.address.city}

${order.client.profile.address.state}
MGW10011
3
1
${order.client.profile.address.street}
${order.client.profile.address.number}
${order.client.profile.address.interior}
${order.client.profile.address.neighborhood}
${order.client.profile.address.postalCode}
${order.client.profile.address.phone1}
${order.client.profile.address.phone2}




MEXICO
${order.client.profile.address.city}
${order.client.profile.address.city}

${order.client.profile.address.state}
${products}`;

};
